{"ast":null,"code":"import { useState, useCallback, useRef } from 'react';\nimport getHeight from 'dom-lib/getHeight';\nimport useUpdateLayoutEffect from './useUpdateLayoutEffect';\nimport useMount from './useMount';\nimport isEmpty from 'lodash/isEmpty';\n/**\r\n * The row information of the table, get the DOM of all rows, and summarize the row height.\r\n * @param props\r\n * @returns\r\n */\n\nvar useTableRows = function useTableRows(props) {\n  var prefix = props.prefix,\n      wordWrap = props.wordWrap,\n      data = props.data,\n      expandedRowKeys = props.expandedRowKeys;\n\n  var _useState = useState([]),\n      tableRowsMaxHeight = _useState[0],\n      setTableRowsMaxHeight = _useState[1];\n\n  var tableRows = useRef({});\n\n  var bindTableRowsRef = function bindTableRowsRef(index, rowData) {\n    return function (ref) {\n      if (ref) {\n        tableRows.current[index] = [ref, rowData];\n      }\n    };\n  };\n\n  var calculateRowMaxHeight = useCallback(function () {\n    if (wordWrap) {\n      var nextTableRowsMaxHeight = [];\n      var curTableRows = Object.values(tableRows.current);\n\n      for (var i = 0; i < curTableRows.length; i++) {\n        var _curTableRows$i = curTableRows[i],\n            row = _curTableRows$i[0];\n\n        if (row) {\n          var cells = row.querySelectorAll(\".\" + prefix('cell-wrap')) || [];\n          var cellArray = Array.from(cells);\n          var maxHeight = 0;\n\n          for (var j = 0; j < cellArray.length; j++) {\n            var cell = cellArray[j];\n            var h = getHeight(cell);\n            maxHeight = Math.max(maxHeight, h);\n          }\n\n          nextTableRowsMaxHeight.push(maxHeight);\n        }\n      } // Can't perform a React state update on an unmounted component\n\n\n      if (!isEmpty(tableRows.current)) {\n        setTableRowsMaxHeight(nextTableRowsMaxHeight);\n      }\n    }\n  }, [prefix, wordWrap]);\n  useMount(function () {\n    setTimeout(calculateRowMaxHeight, 1);\n  });\n  useUpdateLayoutEffect(function () {\n    /**\r\n     * After the data is updated, the height of the cell DOM needs to be re-acquired,\r\n     * and what is often obtained is not the latest DOM that has been rendered.\r\n     * So use `setTimeout` to delay obtaining the height of the cell DOM.\r\n     * TODO: To be improved\r\n     */\n    setTimeout(calculateRowMaxHeight, 1);\n  }, [data, expandedRowKeys]);\n  return {\n    bindTableRowsRef: bindTableRowsRef,\n    tableRowsMaxHeight: tableRowsMaxHeight,\n    tableRows: tableRows\n  };\n};\n\nexport default useTableRows;","map":{"version":3,"names":["useState","useCallback","useRef","getHeight","useUpdateLayoutEffect","useMount","isEmpty","useTableRows","props","prefix","wordWrap","data","expandedRowKeys","_useState","tableRowsMaxHeight","setTableRowsMaxHeight","tableRows","bindTableRowsRef","index","rowData","ref","current","calculateRowMaxHeight","nextTableRowsMaxHeight","curTableRows","Object","values","i","length","_curTableRows$i","row","cells","querySelectorAll","cellArray","Array","from","maxHeight","j","cell","h","Math","max","push","setTimeout"],"sources":["C:/Users/jaink/OneDrive/Desktop/New folder (4)/chameleon-website/node_modules/rsuite-table/es/utils/useTableRows.js"],"sourcesContent":["import { useState, useCallback, useRef } from 'react';\r\nimport getHeight from 'dom-lib/getHeight';\r\nimport useUpdateLayoutEffect from './useUpdateLayoutEffect';\r\nimport useMount from './useMount';\r\nimport isEmpty from 'lodash/isEmpty';\r\n\r\n/**\r\n * The row information of the table, get the DOM of all rows, and summarize the row height.\r\n * @param props\r\n * @returns\r\n */\r\nvar useTableRows = function useTableRows(props) {\r\n  var prefix = props.prefix,\r\n      wordWrap = props.wordWrap,\r\n      data = props.data,\r\n      expandedRowKeys = props.expandedRowKeys;\r\n\r\n  var _useState = useState([]),\r\n      tableRowsMaxHeight = _useState[0],\r\n      setTableRowsMaxHeight = _useState[1];\r\n\r\n  var tableRows = useRef({});\r\n\r\n  var bindTableRowsRef = function bindTableRowsRef(index, rowData) {\r\n    return function (ref) {\r\n      if (ref) {\r\n        tableRows.current[index] = [ref, rowData];\r\n      }\r\n    };\r\n  };\r\n\r\n  var calculateRowMaxHeight = useCallback(function () {\r\n    if (wordWrap) {\r\n      var nextTableRowsMaxHeight = [];\r\n      var curTableRows = Object.values(tableRows.current);\r\n\r\n      for (var i = 0; i < curTableRows.length; i++) {\r\n        var _curTableRows$i = curTableRows[i],\r\n            row = _curTableRows$i[0];\r\n\r\n        if (row) {\r\n          var cells = row.querySelectorAll(\".\" + prefix('cell-wrap')) || [];\r\n          var cellArray = Array.from(cells);\r\n          var maxHeight = 0;\r\n\r\n          for (var j = 0; j < cellArray.length; j++) {\r\n            var cell = cellArray[j];\r\n            var h = getHeight(cell);\r\n            maxHeight = Math.max(maxHeight, h);\r\n          }\r\n\r\n          nextTableRowsMaxHeight.push(maxHeight);\r\n        }\r\n      } // Can't perform a React state update on an unmounted component\r\n\r\n\r\n      if (!isEmpty(tableRows.current)) {\r\n        setTableRowsMaxHeight(nextTableRowsMaxHeight);\r\n      }\r\n    }\r\n  }, [prefix, wordWrap]);\r\n  useMount(function () {\r\n    setTimeout(calculateRowMaxHeight, 1);\r\n  });\r\n  useUpdateLayoutEffect(function () {\r\n    /**\r\n     * After the data is updated, the height of the cell DOM needs to be re-acquired,\r\n     * and what is often obtained is not the latest DOM that has been rendered.\r\n     * So use `setTimeout` to delay obtaining the height of the cell DOM.\r\n     * TODO: To be improved\r\n     */\r\n    setTimeout(calculateRowMaxHeight, 1);\r\n  }, [data, expandedRowKeys]);\r\n  return {\r\n    bindTableRowsRef: bindTableRowsRef,\r\n    tableRowsMaxHeight: tableRowsMaxHeight,\r\n    tableRows: tableRows\r\n  };\r\n};\r\n\r\nexport default useTableRows;"],"mappings":"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"},"metadata":{},"sourceType":"module"}